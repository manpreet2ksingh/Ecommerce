{"version":3,"sources":["config.js","auth/index.js","core/Menu.js","core/cartHelper.js","core/layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/showImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","user/UserDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/ApiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/Checkbox.js","core/fixedPrice.js","core/RadioBox.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Orders.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","_ref","react_default","a","createElement","className","react_router_dom","style","to","length","user","role","react","cursor","onClick","next","push","removeItem","fetch","concat","method","then","response","console","log","catch","error","Layout","_ref$title","title","_ref$description","description","children","core_Menu","Signup","_useState","useState","name","email","password","success","_useState2","Object","slicedToArray","values","setValues","handleChange","event","objectSpread","defineProperty","target","value","handleSubmit","e","preventDefault","headers","Accept","Content-Type","body","stringify","res","json","err","data","layout","display","type","onChange","Signin","loading","redirectToReferrer","clickSubmit","setItem","authenticate","react_router","getProducts","sortBy","getCategories","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","abrupt","sent","stop","apply","this","arguments","getFilteredProducts","skip","limit","filters","undefined","ShowImage","item","url","src","_id","alt","maxHeight","maxWidth","Card","product","_ref$showViewProductB","showViewProductButton","_ref$showAddToCartBut","showAddToCartButton","_ref$cartUpdate","cartUpdate","_ref$showRemoveProduc","showRemoveProductButton","_ref$setRun","setRun","f","_ref$run","run","redirect","setRedirect","_useState3","count","_useState4","setCount","addToCart","cart","Array","from","Set","map","p","id","find","addItem","productId","i","updateItem","shouldRedirect","showImage","substring","price","category","moment","createdAt","fromNow","quantity","showViewButton","showAddToCartBtn","splice","showRemoveButton","showCartUpdateOptions","Search","categories","search","results","searched","setData","loadCategories","useEffect","searchData","params","query","queryString","list","searchSubmit","_objectSpread2","onSubmit","c","key","placeholder","border","searchMessage","core_Card","searchedProducts","Home","productsByArrival","setProductsByArrival","productsBySell","setProductsBySell","_useState5","_useState6","setError","core_Search","PrivateRoute","Component","component","rest","objectWithoutProperties","assign","render","props","state","Dashboard","setHistory","_isAuthenticated","_isAuthenticated$user","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminRoute","adminDashboard","AddCategory","setName","setSuccess","CreateCategory","showError","showSuccess","autoFocus","required","AddProduct","shipping","photo","createdProduct","redirectToProfile","formData","FormData","files","set","CreateProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","toConsumableArray","prices","array","RadioBox","setValue","Shop","setCategories","_useState7","_useState8","setSkip","_useState9","_useState10","size","setSize","_useState11","_useState12","filteredResults","setFilteredResults","_useState13","_useState14","myFilters","setMyFilters","filterBy","newFilters","priceValues","handlePrice","loadFilteredResults","parseInt","loadMore","toSkip","core_Checkbox","core_RadioBox","marginBottom","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","read","match","Checkout","clientToken","instance","address","deliveryAddress","getToken","getBraintreeClientToken","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","getTotal","processPayment","createOrderData","transaction_id","transaction","order","createOrder","message","handleAddress","reduce","currentValue","nextValue","onBlur","lib_default","options","authorization","onInstance","Cart","items","setItems","showItems","core_Checkout","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","borderBottom","index","showStatus","pIndex","padding","Profile","update","alert","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","Routes","exact","auth_PrivateRoute","auth_AdminRoute","AdminDashboard","ReactDOM","StrictMode","src_Routes","document","getElementById"],"mappings":"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","file":"static/js/main.a61ea6fe.chunk.js","sourcesContent":["// export const API = \"https://secret-crag-89303.herokuapp.com\"\r\n\r\nexport const API = \"http://localhost:8000/api\"","import {API} from '../config'\r\n\r\nexport const signup = (user)=>{\r\n    //console.log(name,email,password);\r\n    return fetch(`${API}/signup`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const signin = (user)=>{\r\n    \r\n    return fetch(`${API}/signin`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const authenticate = (data,next)=>{\r\n    if(typeof window != 'undefined')\r\n    {\r\n        localStorage.setItem('jwt',JSON.stringify(data));\r\n        next();\r\n    }\r\n}\r\n\r\n\r\n/*signout - \r\nremove from localStorage \r\nget request to backend\r\nredirect to home page \r\n*/\r\nexport const signout = (next)=>{\r\n    if(typeof window != 'undefined')\r\n    {\r\n        localStorage.removeItem('jwt');\r\n        next();\r\n        fetch(`${API}/signout`,{\r\n            method:'GET'\r\n        })\r\n        .then(response =>console.log('signout',response))\r\n        .catch(error =>console.log(error));\r\n    }\r\n}\r\n\r\nexport const isAuthenticated = ()=>{\r\n    if(typeof window == 'undefined')\r\n    {\r\n        return false;\r\n    }\r\n\r\n    if(localStorage.getItem('jwt'))\r\n    {\r\n        return JSON.parse(localStorage.getItem('jwt'))\r\n    }else{\r\n        return false;\r\n    }\r\n}","import React,{Fragment} from 'react'\r\nimport {Link,withRouter} from 'react-router-dom'\r\nimport {signout,isAuthenticated} from '../auth/index'\r\nimport {itemTotal} from './cartHelper'\r\n// Link like href in html but it prevents the page from reloading again and again\r\n// withRouter - to access props history\r\n\r\nconst isActive = (history,path) =>{\r\n    if(history.location.pathname === path)\r\n    {\r\n        return {color:'#ff9900'}\r\n    }\r\n    else\r\n    {\r\n        return {color:'#ffffff'}\r\n    }\r\n}\r\n\r\nconst Menu = ({history}) =>(    //props accessible due to withRouter from react-router-dom\r\n    <div>\r\n        <ul className='nav nav-tabs bg-primary'>\r\n            <li className='nav-item'>\r\n                <Link className='nav-link'\r\n                      style={isActive(history,'/')}\r\n                      to='/'>\r\n                      Home\r\n                </Link>\r\n            </li>\r\n\r\n            <li className='nav-item'>\r\n                <Link className='nav-link'\r\n                    style={isActive(history,'/shop')}\r\n                    to='/shop'>\r\n                    Shop\r\n                </Link>\r\n            </li>\r\n            <li className='nav-item'>\r\n                <Link className='nav-link'\r\n                    style={isActive(history,'/cart')}\r\n                    to='/cart'>\r\n                    Cart <sup>\r\n                         <small className='cart-badge'>\r\n                            {itemTotal()}\r\n                         </small></sup>\r\n                </Link>\r\n            </li>\r\n\r\n            {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                <li className='nav-item'>\r\n                    <Link className='nav-link'\r\n                        style={isActive(history,'/user/dashboard')}\r\n                        to='/user/dashboard'>\r\n                        Dashboard\r\n                    </Link>\r\n                </li>\r\n            )}\r\n\r\n            \r\n            {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                <li className='nav-item'>\r\n                    <Link className='nav-link'\r\n                        style={isActive(history,'/admin/dashboard')}\r\n                        to='/admin/dashboard'>\r\n                        Dashboard\r\n                    </Link>\r\n                </li>\r\n            )}\r\n\r\n            {!isAuthenticated() && (\r\n                <Fragment>\r\n                    <li className='nav-item'>\r\n                        <Link className='nav-link'\r\n                            style={isActive(history,'/signin')} \r\n                            to='/signin'>\r\n                            Signin\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className='nav-item'>\r\n                        <Link className='nav-link' \r\n                            style={isActive(history,'/signup')} \r\n                            to='/signup'>\r\n                            Signup\r\n                        </Link>\r\n                    </li>\r\n                </Fragment>   \r\n            )}\r\n\r\n            {isAuthenticated() && (\r\n                <li className='nav-item'>\r\n                    <span className='nav-link' \r\n                      style={{cursor:'pointer',color:'#ffffff'}} \r\n                      onClick={\r\n                          ()=>{\r\n                              signout(()=>{\r\n                                  history.push('/')\r\n                              })\r\n                          }\r\n                      }\r\n                      >\r\n                      Signout\r\n                    </span>\r\n                </li>\r\n            )}\r\n\r\n        </ul>\r\n    </div>\r\n)\r\n\r\nexport default withRouter(Menu);","export const addItem = (item,next)=>{\r\n    let cart = [];\r\n    \r\n    /* checking if window object is present or not */\r\n    if(typeof window !== 'undefined')\r\n    {\r\n        // JSON.parse - convert json to object\r\n        if(localStorage.getItem('cart'))\r\n        {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n        \r\n        cart.push({\r\n            ...item,\r\n            count:1\r\n        });\r\n\r\n    /*if the product that is already present in cart is clicked again,\r\n    its count should be incremented instead of its another copy in the storage\r\n    Set - returns only distinct products\r\n    then the map function returns them\r\n    and Array from method creates a new array of distinct products*/\r\n\r\n    cart = Array.from(new Set(cart.map(p=>p._id))).map((id)=>{\r\n        return cart.find(p => p._id === id)\r\n    })\r\n\r\n        localStorage.setItem('cart',JSON.stringify(cart))\r\n        next()\r\n    }\r\n}\r\n\r\nexport const itemTotal = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart')).length;\r\n        }\r\n    }\r\n    return 0;\r\n};\r\n\r\n\r\nexport const getCart = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n    }\r\n    return [];\r\n};\r\nexport const updateItem = (productId,count) =>{\r\n    let cart = [];\r\n    \r\n    if(typeof window !== 'undefined')\r\n    {\r\n        if(localStorage.getItem('cart'))\r\n        {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n\r\n            \r\n        cart.map((p,i)=>{\r\n            if(p._id === productId)\r\n            {\r\n                cart[i].count = count\r\n            }\r\n        })\r\n\r\n        localStorage.setItem('cart',JSON.stringify(cart))\r\n    }  \r\n}\r\n\r\n\r\nexport const removeItem = (productId) =>{\r\n    let cart = [];\r\n    \r\n    if(typeof window !== 'undefined')\r\n    {\r\n        if(localStorage.getItem('cart'))\r\n        {\r\n            cart = JSON.parse(localStorage.getItem('cart'))\r\n        }\r\n\r\n        cart.map((p,i)=>{\r\n            if(p._id === productId)\r\n            {\r\n                cart.splice(i,1);\r\n            }\r\n        })\r\n    \r\n        localStorage.setItem('cart',JSON.stringify(cart))\r\n\r\n    }  \r\n    return cart;\r\n}\r\n\r\n\r\nexport const emptyCart = (next)=>{\r\n    if(typeof window!=='undefined')\r\n    {\r\n        localStorage.removeItem('cart')\r\n        next()\r\n    }\r\n}","import React from 'react'\r\nimport Menu from './Menu'\r\nimport '../styles.css'\r\n\r\nconst Layout = ({title='Title',\r\n    description='Description',\r\n    className,\r\n    children}) =>{\r\n        return(\r\n            <div>\r\n            <Menu />\r\n                <div className='jumbotron'>\r\n                <h2>{title}</h2>\r\n                <p className='lead'>{description}</p>\r\n                </div>\r\n                <div className={className}>{children}</div>\r\n            </div>\r\n        )\r\n    }\r\n  \r\nexport default Layout;    ","import React, { useState } from 'react'\r\nimport Layout from '../core/layout'\r\nimport {Link} from 'react-router-dom'\r\nimport {signup} from '../auth/index'\r\n\r\nconst Signup = () =>{\r\n    \r\n    const [values,setValues] = useState({\r\n        name:'',\r\n        email:'',\r\n        password:'',\r\n        error:'',\r\n        success:false\r\n    })\r\n\r\n    const {name,email,password,error,success} = values;\r\n\r\n    const handleChange = (name) =>(event) =>{\r\n        setValues({...values,error:false,[name]:event.target.value})\r\n    }\r\n\r\n  \r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        setValues({...values,error:false})\r\n        signup({name,email,password})\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setValues({...values,error:data.error,success:false})\r\n            }\r\n            else\r\n            {\r\n                setValues({\r\n                    ...values,\r\n                    name:'',\r\n                    email:'',\r\n                    password:'',\r\n                    error:'',\r\n                    success:true\r\n                })\r\n            }\r\n        })\r\n        .catch()\r\n    }\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className='form-group'>\r\n                <label className='text-muted'> Name </label>\r\n                <input type='text' \r\n                className='form-control' \r\n                onChange={handleChange('name')}\r\n                value={name}/>\r\n            </div>\r\n\r\n            <div className='form-group'>\r\n                <label className='text-muted'> Email </label>\r\n                <input type='email' \r\n                className='form-control'\r\n                onChange={handleChange('email')}\r\n                value={email}/>\r\n            </div>\r\n\r\n            <div className='form-group'>\r\n                <label className='text-muted'> Password </label>\r\n                <input type='password' \r\n                className='form-control'\r\n                onChange={handleChange('password')}\r\n                value={password}/>\r\n            </div>\r\n\r\n            <button className='btn btn-primary' onClick={handleSubmit}>\r\n             Submit\r\n            </button>\r\n\r\n        </form>\r\n    )\r\n\r\n    const showError = () =>(\r\n        <div className='alert alert-danger' style={{display: error ? '':'none'}}>\r\n        {error}\r\n    </div>\r\n    )\r\n\r\n    const showSuccess = () =>(\r\n        <div className='alert alert-info' style={{display: success ? '':'none'}}>\r\n            New user created successfully.Please <Link to='/signin'>Signin</Link>.\r\n        </div>\r\n    )\r\n    \r\n    return(\r\n        <div>\r\n        <Layout title='Signup Page' \r\n                description='Signup to Node React E-commerce App'\r\n                className='container col-md-8 offset-md-2'>\r\n        {showError()}\r\n        {showSuccess()}        \r\n        {signUpForm()}  \r\n              \r\n        </Layout>  \r\n    </div>\r\n    )\r\n}\r\nexport default Signup;","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Layout from \"../core/layout\";\r\nimport { signin,authenticate,isAuthenticated } from \"../auth/index\";\r\n\r\nconst Signin = () => {\r\n    const [values, setValues] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        error: \"\",\r\n        loading: false,\r\n        redirectToReferrer: false\r\n    });\r\n\r\n    const { email, password, loading, error, redirectToReferrer } = values;\r\n\r\n   // used to distinguish admin and registered user \r\n   /*if role is 1 - redirect to admin dashboard\r\n     else if role is 0 redirect to user dashboard */\r\n\r\n   const {user} = isAuthenticated(); \r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: false, loading: true });\r\n        signin({ email, password }).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error, loading: false });\r\n            } else {\r\n                  authenticate(\r\n                      data,\r\n                      ()=>{\r\n                        setValues({\r\n                            ...values,\r\n                            redirectToReferrer: true\r\n                        });\r\n                      })\r\n            }\r\n        });\r\n    };\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input\r\n                    onChange={handleChange(\"email\")}\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input\r\n                    onChange={handleChange(\"password\")}\r\n                    type=\"password\"\r\n                    className=\"form-control\"\r\n                    value={password}\r\n                />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div\r\n            className=\"alert alert-danger\"\r\n            style={{ display: error ? \"\" : \"none\" }}\r\n        >\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-info\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToReferrer) {\r\n            if(user && user.role === 1)\r\n            {\r\n                return <Redirect to=\"/admin/dashboard\" />\r\n            }\r\n            else\r\n            {\r\n                return <Redirect to=\"/user/dashboard\" />\r\n            }\r\n        }\r\n\r\n        if(isAuthenticated())\r\n        {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Signin\"\r\n            description=\"Signin to Node React E-commerce App\"\r\n            className=\"container col-md-8 offset-md-2\"\r\n        >\r\n            {showLoading()}\r\n            {showError()}\r\n            {signUpForm()}\r\n            {redirectUser()}\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Signin;\r\n","import {API} from '../config'\r\nimport queryString from 'query-string'\r\n\r\nexport const getProducts = (sortBy) =>(\r\n    fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`,{\r\n        method:'GET'\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\nexport const read = (productId) =>(\r\n    fetch(`${API}/product/${productId}`,{\r\n        method:'GET'\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\n\r\nexport const getCategories = async () =>{\r\n    return await fetch(`${API}/categories`,{\r\n        method:'GET'\r\n    })\r\n    .then((res)=>{\r\n        console.log(res)\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const getFilteredProducts = (skip,limit,filters={})=>{\r\n    const data = {limit,skip,filters};\r\n    return fetch(`${API}/products/by/search`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\n// queryString - to pass params as string instead passing separately\r\nexport const list = params => {\r\n    const query = queryString.stringify(params);\r\n    console.log(\"query\", query);\r\n    return fetch(`${API}/products/search?${query}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listRelated = (productId) =>(\r\n    fetch(`${API}/products/related/${productId}`,{\r\n        method:'GET'\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\nexport const getBraintreeClientToken = (userId,token) =>(\r\n    fetch(`${API}/braintree/getToken/${userId}`,{\r\n        method:'GET',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\nexport const processPayment = (userId,token,paymentData) =>(\r\n    fetch(`${API}/braintree/payment/${userId}`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body:JSON.stringify(paymentData)\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\n\r\nexport const createOrder = (userId,token,createOrderData) =>(\r\n    fetch(`${API}/order/create/${userId}`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body:JSON.stringify({order:createOrderData})\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)","import React from 'react'\r\nimport {API} from '../config'\r\n\r\nconst ShowImage = ({item,url}) =>(\r\n    <div className='product-img'>\r\n        <img src={`${API}/${url}/photo/${item._id}`}\r\n             alt={item.name}\r\n             className='mb-3'\r\n             style={{maxHeight:'100%',maxWidth:'100%'}}\r\n        />\r\n    </div>\r\n)\r\n\r\nexport default ShowImage;","import React, { useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport ShowImage from './showImage';\r\nimport moment from 'moment';\r\nimport { addItem, updateItem, removeItem } from './cartHelper';\r\n \r\nconst Card = ({\r\n  product,\r\n  showViewProductButton = true,\r\n  showAddToCartButton = true,\r\n  cartUpdate = false,\r\n  showRemoveProductButton = false,\r\n  setRun = f => f,\r\n  run = undefined\r\n}) => {\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [count, setCount] = useState(product.count);\r\n \r\n  const showViewButton = showViewProductButton => {\r\n    return (\r\n      showViewProductButton && (\r\n        <Link to={`/product/${product._id}`} className=\"mr-2\">\r\n          <button className=\"btn btn-outline-primary mt-2 mb-2 card-btn-1\">View Product</button>\r\n        </Link>\r\n      )\r\n    );\r\n  };\r\n  \r\nconst addToCart = () => {\r\n    addItem(product,()=>{\r\n        setRedirect(true)\r\n    });\r\n  };\r\n \r\n  const shouldRedirect = redirect => {\r\n    if (redirect) {\r\n      return <Redirect to=\"/cart\" />;\r\n    }\r\n  };\r\n \r\n  const showAddToCartBtn = showAddToCartButton => {\r\n    return (\r\n      showAddToCartButton && (\r\n        <button onClick={addToCart} className=\"btn btn-outline-warning mt-2 mb-2 card-btn-1  \">\r\n          Add to cart\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n \r\n  const showStock = quantity => {\r\n    return quantity > 0 ? (\r\n      <span className=\"badge badge-primary badge-pill\">In Stock </span>\r\n    ) : (\r\n      <span className=\"badge badge-primary badge-pill\">Out of Stock </span>\r\n    );\r\n  };\r\n \r\n  const handleChange = productId => event => {\r\n    setRun(!run); // run useEffect in parent Cart\r\n    setCount(event.target.value < 1 ? 1 : event.target.value);\r\n    if (event.target.value >= 1) {\r\n      updateItem(productId, event.target.value);\r\n    }\r\n  };\r\n \r\n  const showCartUpdateOptions = cartUpdate => {\r\n    return (\r\n      cartUpdate && (\r\n        <div>\r\n          <div className=\"input-group mb-3\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\">Adjust Quantity</span>\r\n            </div>\r\n            <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)} />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n  const showRemoveButton = showRemoveProductButton => {\r\n    return (\r\n      showRemoveProductButton && (\r\n        <button\r\n          onClick={() => {\r\n            removeItem(product._id);\r\n            setRun(!run); // run useEffect in parent Cart\r\n          }}\r\n          className=\"btn btn-outline-danger mt-2 mb-2\"\r\n        >\r\n          Remove Product\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"card \">\r\n      <div className=\"card-header card-header-1 \">{product.name}</div>\r\n      <div className=\"card-body\">\r\n        {shouldRedirect(redirect)}\r\n        <ShowImage item={product} url=\"products\" />\r\n        <p className=\"card-p  mt-2\">{product.description.substring(0, 100)} </p>\r\n        <p className=\"card-p black-10\">$ {product.price}</p>\r\n        <p className=\"black-9\">Category: {product.category && product.category.name}</p>\r\n        <p className=\"black-8\">Added on {moment(product.createdAt).fromNow()}</p>\r\n        {showStock(product.quantity)}\r\n        <br />\r\n \r\n        {showViewButton(showViewProductButton)}\r\n \r\n        {showAddToCartBtn(showAddToCartButton)}\r\n \r\n        {showRemoveButton(showRemoveProductButton)}\r\n \r\n        {showCartUpdateOptions(cartUpdate)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n \r\nexport default Card;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: \"\",\r\n        search: \"\",\r\n        results: [],\r\n        searched: false\r\n    });\r\n\r\n    const { categories, category, search, results, searched } = data;\r\n\r\n    const loadCategories = async () => {\r\n        await getCategories().then(data => {\r\n            console.log(data)\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({ ...data, categories: data.categories });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const searchData = () => {\r\n        // console.log(search, category);\r\n        if (search) {\r\n            list({ search: search || undefined, category: category }).then(\r\n                response => {\r\n                    if (response.error) {\r\n                        console.log(response.error);\r\n                    } else {\r\n                        setData({ ...data, results: response, searched: true });\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    const searchSubmit = e => {\r\n        e.preventDefault();\r\n        searchData();\r\n    };\r\n\r\n    const handleChange = name => event => {\r\n        setData({ ...data, [name]: event.target.value, searched: false });\r\n    };\r\n\r\n    const searchMessage = (searched, results) => {\r\n        if (searched && results.length > 0) {\r\n            return `Found ${results.length} products`;\r\n        }\r\n        if (searched && results.length < 1) {\r\n            return `No products found`;\r\n        }\r\n    };\r\n\r\n    const searchedProducts = (results = []) => {\r\n        return (\r\n            <div>\r\n                <h2 className=\"mt-4 mb-4\">\r\n                    {searchMessage(searched, results)}\r\n                </h2>\r\n\r\n                <div className=\"row\">\r\n                    {results.map((product, i) => (\r\n                        <Card key={i} product={product} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const searchForm = () => (\r\n        <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\">\r\n                <div className=\"input-group input-group-lg\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <select\r\n                            className=\"btn mr-2\"\r\n                            onChange={handleChange(\"category\")}\r\n                        >\r\n                            <option value=\"All\">All</option>\r\n                            {categories.map((c, i) => (\r\n                                <option key={i} value={c._id}>\r\n                                    {c.name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <input\r\n                        type=\"search\"\r\n                        className=\"form-control\"\r\n                        onChange={handleChange(\"search\")}\r\n                        placeholder=\"Search by name\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"btn input-group-append\"\r\n                    style={{ border: \"none\" }}\r\n                >\r\n                    <button className=\"input-group-text\">Search</button>\r\n                </div>\r\n            </span>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"container mb-3\">{searchForm()}</div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState,useEffect } from 'react'\r\nimport Layout from './layout'\r\nimport {getProducts} from './apiCore'\r\nimport Card from './Card'\r\nimport Search from './Search'\r\n\r\nconst Home = () =>{\r\n\r\n    const [productsByArrival,setProductsByArrival] = useState([]);\r\n    const [productsBySell,setProductsBySell] = useState([]);\r\n    const [error,setError] = useState(false);\r\n\r\n    const loadProductsByArrival = () =>{\r\n        getProducts('createdAt')\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setProductsByArrival(data.data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadProductsBySell = () =>{\r\n        getProducts('sold')\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setProductsBySell(data.data) //data.data is array // data alone object is returned\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadProductsByArrival()\r\n        loadProductsBySell()\r\n    },[])\r\n\r\n\r\n    return(\r\n        <div>\r\n        <Layout title='Home Page' \r\n                description='Node React E-commerce App' className='container'>\r\n            <Search />\r\n            <h2 className='mb-4'>Best Sellers</h2>\r\n            <div className='row'>\r\n                {\r\n                    productsBySell.map((product,i)=>(\r\n                        <div key={i} className='col-4 mb-3'>\r\n                            <Card product={product} />\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n\r\n            <h2 className='mb-4'>New Arrivals</h2>\r\n            <div className='row'>\r\n                {\r\n                    productsByArrival.map((product,i)=>(\r\n                        <div key={i} className='col-4 mb-3'>\r\n                            <Card product={product}/>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        </Layout>        \r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Home;","/*Only authenticated users can access the dashboard */\r\n\r\nimport React from 'react'\r\nimport {Route,Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\nconst PrivateRoute =({component:Component,...rest}) =>(\r\n    <Route \r\n    {...rest}\r\n    render = {props=>\r\n    isAuthenticated() ?(\r\n        <Component {...props} />\r\n    ):(\r\n        <Redirect \r\n            to = {{\r\n                    pathname:'/signin',\r\n                    state:{from:props.location}\r\n                 }}\r\n        />\r\n    )}\r\n    />\r\n)\r\n\r\nexport default PrivateRoute;","import React, { useEffect,useState } from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {Link} from 'react-router-dom'\r\nimport {getPurchaseHistory} from './apiUser'\r\nimport moment from 'moment'\r\n\r\nconst Dashboard = () =>{\r\n\r\n    const [history,setHistory] = useState([])\r\n    const {user:{_id,name,email,role},token} = isAuthenticated();\r\n    \r\n    const init = (userId,token)=>{\r\n        getPurchaseHistory(userId,token)\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                console.log(data.error)\r\n            }\r\n            else\r\n            {\r\n                setHistory(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init(_id,token)\r\n    },[])\r\n\r\n    const userLinks = () =>{\r\n        return(\r\n            <div className='card'>\r\n                <h4 className='card-header'>User Links</h4>\r\n                <ul className='list-group'>\r\n                    <li className='list-group-item'>\r\n                        <Link to='/cart' className='nav-link'>\r\n                            My Cart\r\n                        </Link>\r\n                    </li>\r\n                    <li className='list-group-item'>\r\n                        <Link className='nav-link' to={`/profile/${_id}`}>\r\n                            Update Profile\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n   const userInfo = () =>{\r\n       return(\r\n        <div className='card mb-5'>\r\n            <h3 className='card-header'>User Information</h3>\r\n            <ul className='list-group'>\r\n                <li className='list-group-item'>{name}</li>\r\n                <li className='list-group-item'>{email}</li>\r\n                <li className='list-group-item'>\r\n                    {role === 1 ? 'Admin':'Registered User'}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n       )\r\n   }\r\n\r\n   const purchaseHistory = history => {\r\n    return (\r\n    <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">Purchase history</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n                {history.map((h, i) => {\r\n                    return (\r\n                        <div>\r\n                        <hr />\r\n                            {h.products.map((p, i) => {\r\n                            return (\r\n                                <div key={i}>\r\n                                <h6>Product name: {p.name}</h6>\r\n                                <h6>Product price: ${p.price}</h6>\r\n                        <h6>Purchased date: {moment(p.createdAt).fromNow()}\r\n                        </h6>\r\n                        </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n                );\r\n        })}\r\n        </li>\r\n        </ul>\r\n    </div>\r\n    )\r\n}\r\n   \r\n    return( \r\n        <Layout title='Dashboard' \r\n                description={`G'day ${name}!`}   \r\n                className='container-fluid'>\r\n          <div className='row'>\r\n\r\n            <div className='col-3'>{userLinks()}</div>\r\n            <div className='col-9'>\r\n                {userInfo()}\r\n                {purchaseHistory(history)}\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </Layout>\r\n    )    \r\n}\r\n\r\nexport default Dashboard;","import {API} from '../config'\r\n\r\nexport const read = (userId,token) =>{\r\n    return fetch(`${API}/user/${userId}`,{\r\n        method:'GET',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const update = (userId,token,data) =>(\r\n    fetch(`${API}/user/${userId}`,{\r\n        method:'PUT',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body:JSON.stringify(data)\r\n    })\r\n    .then(res => res.json())\r\n    .catch(err =>console.log(err))\r\n)\r\n\r\n// for updation of info in the local storage\r\n\r\nexport const updateUser = (user,next)=>{\r\n    if(typeof window !== 'undefined')\r\n    {\r\n        if(localStorage.getItem('jwt'))\r\n        {\r\n            let auth = JSON.parse(localStorage.getItem('jwt'))\r\n            auth.user = user\r\n            localStorage.setItem('jwt',JSON.stringify(auth))\r\n            next()\r\n        }\r\n    }\r\n}\r\n\r\nexport const getPurchaseHistory = (userId,token) =>{\r\n    return fetch(`${API}/order/by/user/${userId}`,{\r\n        method:'GET',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}","import React from 'react'\r\nimport {Route,Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\nconst AdminRoute =({component:Component,...rest}) =>(\r\n    <Route \r\n    {...rest}\r\n    render = {props=>\r\n    isAuthenticated() && isAuthenticated().user.role === 1 ?(\r\n        <Component {...props} />\r\n    ):(\r\n        <Redirect \r\n            to = {{\r\n                    pathname:'/signin',\r\n                    state:{from:props.location}\r\n                 }}\r\n        />\r\n    )}\r\n    />\r\n)\r\n\r\nexport default AdminRoute;","import React from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst adminDashboard = () =>{\r\n\r\n    const adminLinks = () =>{\r\n        return(\r\n            <div className='card'>\r\n                <h4 className='card-header'>Admin Links</h4>\r\n                <ul className='list-group'>\r\n                    <li className='list-group-item'>\r\n                        <Link to='/create/category' className='nav-link'>\r\n                            Create Category\r\n                        </Link>\r\n                    </li>\r\n                    <li className='list-group-item'>\r\n                        <Link className='nav-link' to='/create/product'>\r\n                            Create Product\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className='list-group-item'>\r\n                        <Link className='nav-link' to='/admin/orders'>\r\n                            View Orders\r\n                        </Link>\r\n                    </li>\r\n\r\n                    <li className='list-group-item'>\r\n                        <Link className='nav-link' to='/admin/products'>\r\n                            Manage Orders\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n   \r\n   const {user:{_id,name,email,role}} = isAuthenticated();\r\n\r\n   const adminInfo = () =>{\r\n       return(\r\n        <div className='card mb-5'>\r\n            <h3 className='card-header'>User Information</h3>\r\n            <ul className='list-group'>\r\n                <li className='list-group-item'>{name}</li>\r\n                <li className='list-group-item'>{email}</li>\r\n                <li className='list-group-item'>\r\n                    {role === 1 ? 'Admin':'Registered User'}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n       )\r\n   }\r\n   \r\n    return( \r\n        <Layout title='Dashboard' \r\n                description={`G'day ${name}!`}   \r\n                className='container-fluid'>\r\n          <div className='row'>\r\n\r\n            <div className='col-3'>{adminLinks()}</div>\r\n            <div className='col-9'>\r\n                {adminInfo()}\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </Layout>\r\n    )    \r\n}\r\n\r\nexport default adminDashboard;","import {API} from '../config'\r\n\r\nexport const CreateCategory = (userId,token,category)=>{\r\n    return fetch(`${API}/category/create/${userId}`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(category)\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const CreateProduct = (userId,token,product)=>{\r\n    return fetch(`${API}/product/create/${userId}`,{\r\n        method:'POST',\r\n        headers:{\r\n            Accept:'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const getCategories = () =>{\r\n    return fetch(`${API}/categories`,{\r\n        method:'GET'\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const listOrders = (userId,token) =>{\r\n    return fetch(`${API}/order/list/${userId}`,{\r\n        method:'GET',\r\n        headers:{\r\n            Accept:'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const getStatusValues = (userId,token) =>{\r\n    return fetch(`${API}/order/status-values/${userId}`,{\r\n        method:'GET',\r\n        headers:{\r\n            Accept:'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const updateOrderStatus = (userId,token,orderId,status) =>{\r\n    return fetch(`${API}/order/${orderId}/status/${userId}`,{\r\n        method:'PUT',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body:JSON.stringify({orderId,status})\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\n/*\r\nto get all the products\r\nto get single product\r\nto update or delete single product\r\n*/\r\n\r\nexport const getProducts = ()=>{\r\n    return fetch(`${API}/products?limit=100`,{\r\n        method:\"GET\"\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(error => console.log(error))\r\n}\r\n\r\n// to get single product\r\nexport const getProduct = (productId)=>{\r\n    return fetch(`${API}/product/${productId}`,{\r\n        method:\"GET\"\r\n    })\r\n    .then(res=>{\r\n        return res.json()\r\n    })\r\n    .catch(error => console.log(error))\r\n}\r\n\r\nexport const deleteProduct = (productId,userId,token) =>{\r\n    return fetch(`${API}/product/${productId}/${userId}`,{\r\n        method:'DELETE',\r\n        headers:{\r\n            Accept:'application/json',\r\n            'Content-Type':'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        }\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}\r\n\r\nexport const updateProduct = (productId,userId,token,product) =>{\r\n    return fetch(`${API}/product/${productId}/${userId}`,{\r\n        method:'PUT',\r\n        headers:{\r\n            Accept:'application/json',\r\n            Authorization:`Bearer ${token}`\r\n        },\r\n        body:product\r\n    })\r\n    .then((res)=>{\r\n        return res.json()\r\n        })\r\n    .catch(err=>console.log(err))\r\n}","import React,{useState} from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {CreateCategory} from './ApiAdmin'\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\nconst AddCategory = () => {\r\n    const [name,setName] = useState('')\r\n    const [error,setError] = useState(false)\r\n    const [success,setSuccess] = useState(false)\r\n\r\n    // destructuring name and token\r\n    const {user,token} = isAuthenticated();\r\n\r\n    const handleChange = (e)=>{\r\n        setError(false)\r\n        setSuccess(false)\r\n        setName(e.target.value)\r\n    }\r\n\r\n    const handleSubmit = (e)=>{\r\n        e.preventDefault();\r\n        setError(false);\r\n        setSuccess(false);\r\n        // make request to API\r\n        CreateCategory(user._id,token,{name})\r\n        .then(data =>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }else{\r\n                setName('')\r\n                setError(false)\r\n                setSuccess(true)\r\n            }\r\n        })\r\n    }\r\n\r\n    const showSuccess = ()=>{\r\n        if(success){\r\n            return <h3 className='text-success'>\r\n                         Category {name} is created\r\n                   </h3>\r\n        }\r\n    }\r\n\r\n    const showError = ()=>{\r\n        if(error){\r\n            return <h3 className='text-danger'>\r\n                Category should be unique.{name} is already created.\r\n                </h3>\r\n        }\r\n    }\r\n\r\n    const goBack = ()=>(\r\n        <div className='mt-5'>\r\n            <Link to='/admin/dashboard' className='text-warning'>\r\n                  Back to dashboard\r\n            </Link>\r\n        </div>\r\n    )\r\n\r\n    const newCategoryForm = () =>(\r\n        <form onSubmit={handleSubmit}>\r\n            <div className = 'form-group'>\r\n                <label className='text-muted'>Name</label>\r\n                <input type='text' \r\n                       className='form-control'\r\n                       onChange = {handleChange}\r\n                       value={name}\r\n                       autoFocus\r\n                       required />       \r\n            </div>\r\n            <button className='btn btn-outline-primary'>\r\n                Create Category\r\n            </button>\r\n        </form>\r\n    )\r\n\r\n    return( \r\n        <Layout title='Add a New Category' \r\n                description={`G'day ${user.name}!`}>\r\n          <div className='row'>\r\n            <div className='col-md-8 offset-md-2'>\r\n                {showError()}\r\n                {showSuccess()}\r\n                {newCategoryForm()}\r\n                {goBack()}\r\n            </div>\r\n          </div>\r\n\r\n        </Layout>\r\n    )    \r\n\r\n}\r\nexport default AddCategory;","import React,{useState,useEffect} from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {CreateProduct,getCategories} from './ApiAdmin'\r\n\r\nconst AddProduct = ()=>{\r\n\r\n    const [values,setValues] = useState({\r\n        name:'',\r\n        description:'',\r\n        price:'',\r\n        categories:[],\r\n        category:'',\r\n        shipping:'',\r\n        quantity:'',\r\n        photo:'',\r\n        loading:false,\r\n        error:false,\r\n        createdProduct:'',\r\n        redirectToProfile:false,\r\n        formData:''\r\n    })\r\n    // destructuring\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    const {user,token} = isAuthenticated();\r\n\r\n    const init = ()=>{\r\n        getCategories()\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setValues({...values,error:data.error})\r\n            }\r\n            else\r\n            {\r\n                setValues({...values,\r\n                           categories: data.categories,\r\n                           formData:new FormData()})           \r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = (name === 'photo') ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        CreateProduct(user._id, token, formData).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    createdProduct: data.product.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const showError = () =>(\r\n        <div className='alert alert-danger' \r\n                style={{display:error ? '':'none'}}>\r\n            {error}    \r\n        </div>\r\n    )\r\n\r\n    const showSuccess = () =>(\r\n        <div className='alert alert-info' \r\n                style={{display:createdProduct ? '':'none'}}>\r\n            <h2>{createdProduct} created successfully</h2>    \r\n        </div>\r\n    ) \r\n\r\n    const showLoading= () =>(\r\n        loading && <div className='alert alert-success'>\r\n            <h2>Loading...</h2>    \r\n        </div>\r\n    )\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} \r\n                           type=\"file\" \r\n                           name=\"photo\" \r\n                           accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')}\r\n                       type=\"text\" \r\n                       className=\"form-control\" \r\n                       value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} \r\n                          className=\"form-control\" \r\n                          value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')}\r\n                       type=\"number\" \r\n                       className=\"form-control\" \r\n                       value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} \r\n                        className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories && categories.map((c,i)=>(\r\n                        <option key={i} value={c._id}>{c.name}</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')}\r\n                        className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')}\r\n                       type=\"number\"\r\n                       className=\"form-control\" \r\n                       value={quantity} \r\n                />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">\r\n                    Create Product\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    return( \r\n        <Layout title='Add a New Product' \r\n                description={`G'day ${user.name}!`}>\r\n          <div className='row'>\r\n            <div className='col-md-8 offset-md-2'>\r\n                {showLoading()}\r\n                {showError()}\r\n                {showSuccess()}\r\n                {newPostForm()}\r\n            </div>\r\n          </div>\r\n\r\n        </Layout>\r\n    ) \r\n\r\n}\r\n\r\nexport default AddProduct;\r\n","import React,{useState,useEffect} from 'react'\r\n\r\n\r\nconst Checkbox = ({categories,handleFilters})=>{\r\n\r\n    const [checked,setChecked] = useState([])\r\n\r\n    const handleToggle = c =>()=>{ // c - category id\r\n        // indexOf - returns first found index or -1\r\n        const currentCategoryId = checked.indexOf(c);\r\n        const newCheckedCategoryId = [...checked];\r\n// if checked category is already present then pull/take it of else push it into \r\n// checked state\r\n        if(currentCategoryId == -1)\r\n        {\r\n            newCheckedCategoryId.push(c);\r\n        }\r\n        else\r\n        {\r\n            newCheckedCategoryId.splice(currentCategoryId,1);\r\n        }\r\n        // console.log(newCheckedCategoryId);\r\n        setChecked(newCheckedCategoryId);\r\n        handleFilters(newCheckedCategoryId);\r\n    }\r\n\r\n    return(\r\n        categories.map((c,i)=>(\r\n            <li className='list-unstyled' key={i}>\r\n                <input onChange={handleToggle(c._id)} \r\n                       className='form-check-input' \r\n                       type='checkbox'\r\n                       value={checked.indexOf(c._id) === -1}/>\r\n                <label className='form-check-label'>{c.name}</label>\r\n            </li>\r\n        ))\r\n    )\r\n}\r\n\r\nexport default Checkbox;","export const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"$0 to $9\",\r\n        array: [0, 9]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"$10 to $19\",\r\n        array: [10, 19]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"$20 to $29\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"$30 to $39\",\r\n        array: [30, 39]\r\n    },\r\n    {\r\n        _id: 5,\r\n        name: \"More than $40\",\r\n        array: [40, 99]\r\n    }\r\n];\r\n","import React,{useEffect,useState, Fragment, useImperativeHandle} from 'react'\r\n\r\nconst RadioBox = ({prices,handleFilters})=>{\r\n\r\n    const [value,setValue] = useState(0);\r\n\r\n    const handleChange = (event)=>{\r\n        handleFilters(event.target.value)\r\n        setValue(event.target.value)\r\n    }\r\n\r\n    return(\r\n        prices.map((p,i)=>(\r\n            <div key={i}>\r\n                <input className='mr-2 ml-4' \r\n                       type='radio'\r\n                       name={p}\r\n                       value = {p._id}\r\n                       onChange={handleChange} />\r\n                <label className='form-check-label'>\r\n                        {p.name}\r\n                </label>\r\n            </div>\r\n        ))\r\n    )\r\n\r\n}\r\n\r\nexport default RadioBox;","import React , {useEffect,useState} from 'react'\r\nimport Layout from './layout'\r\nimport Card from './Card'\r\nimport {getCategories,getFilteredProducts} from './apiCore'\r\nimport Checkbox from './Checkbox'\r\nimport {prices} from './fixedPrice'\r\nimport RadioBox from './RadioBox'\r\n\r\nconst Shop = () =>{\r\n\r\n    const [categories,setCategories] = useState([])\r\n    const [error,setError] = useState(false)\r\n    const [limit,setLimit] = useState(6)\r\n    const [skip,setSkip] = useState(0)\r\n    const [size,setSize] = useState(0)\r\n    const [filteredResults,setFilteredResults] = useState([])\r\n\r\n    const [myFilters,setMyFilters] = useState({\r\n        filters:{\r\n            category:[],\r\n            price:[]\r\n        }\r\n    })\r\n\r\n    const init = ()=>{\r\n        getCategories()\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setCategories(data.categories)           \r\n            }\r\n        })\r\n    }\r\n\r\n    const handleFilters = (filters,filterBy) =>{\r\n        // console.log('Shop',filters,filterBy)\r\n        const newFilters = {...myFilters}; \r\n        newFilters.filters[filterBy] = filters;\r\n\r\n        if(filterBy === 'price')\r\n        {\r\n            let priceValues = handlePrice(filters)\r\n            newFilters.filters[filterBy] = priceValues;\r\n        }\r\n        loadFilteredResults(myFilters.filters);\r\n        setMyFilters(newFilters);\r\n    }\r\n\r\n    const loadFilteredResults = (newFilters)=>{\r\n        getFilteredProducts(skip,limit,newFilters)\r\n        .then(data =>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setFilteredResults(data.data)\r\n                setSize(data.size)\r\n                setSkip(0)\r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n    const handlePrice = (value) =>{\r\n        const data = prices;\r\n        let array = [];\r\n        for(let key in data){\r\n            if(data[key]._id === parseInt(value) )\r\n            {\r\n                array = data[key].array;\r\n            }\r\n        }\r\n        return array\r\n    }\r\n\r\n    const loadMore = () =>{\r\n        let toSkip = skip + limit;\r\n        getFilteredProducts(toSkip,limit,myFilters.filters).then(data=>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setFilteredResults([...filteredResults,...data.data])\r\n                setSize(data.size)\r\n                setSkip(toSkip)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadMoreButton = () =>{\r\n        return(\r\n            size>0 && size>=limit && (\r\n                <button onClick = {loadMore} \r\n                        className='btn btn-warning mb5'\r\n                        style={{marginBottom:'20px'}}>\r\n                        Load More\r\n                </button>\r\n            )\r\n        )\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init();\r\n        loadFilteredResults(skip,limit,myFilters.filters);\r\n    },[])\r\n\r\n    console.log(myFilters.filters)\r\n    return(\r\n            <Layout title='Shop' \r\n                    description='Search and Find books of your choice.'\r\n                    className='container-fluid'>\r\n                <div className='row'>\r\n                    <div className='col-4'>\r\n                    <h4>Filter by Categories</h4>\r\n                        <ul>\r\n                            <Checkbox \r\n                            categories={categories}\r\n                            handleFilters = \r\n                            {filters=>handleFilters(filters,'category')}\r\n                            />\r\n                        </ul>\r\n                        <h4>Filter by Price</h4>    \r\n                        <div>\r\n                            <RadioBox \r\n                            prices={prices}\r\n                            handleFilters = \r\n                            {filters=>handleFilters(filters,'price')}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className='col-8'>\r\n                        <h2 className = 'mb-4'>Products</h2>\r\n                        <div className='row'>\r\n                            {\r\n                                filteredResults.map((p,i)=>(\r\n                                    <div key={i} className='col-4 mb-3'>\r\n                                        <Card product={p}/>\r\n                                    </div>\r\n                                ))\r\n                            }\r\n                        </div>\r\n                        <hr/>\r\n                    {loadMoreButton()}    \r\n                    </div>\r\n                </div>\r\n            </Layout>        \r\n    )\r\n}\r\n\r\nexport default Shop;","import React, { useState, useEffect } from 'react'\r\nimport Layout from './layout'\r\nimport {read,listRelated} from './apiCore'\r\nimport Card from './Card'\r\n\r\nconst Product = (props) =>{\r\n    \r\n    // props comes with react router dom\r\n\r\n    const [product,setProduct] = useState({})\r\n    const [relatedProduct,setRelatedProduct] = useState([])\r\n    const [error,setError] = useState(false)\r\n\r\n    const loadSingleProduct = (productId) =>{\r\n        read(productId).then(data=>{\r\n            if(data.error)\r\n            {\r\n                setError(data.error)\r\n            }\r\n            else\r\n            {\r\n                setProduct(data)\r\n                listRelated(data._id).then(data=>{\r\n                    if(data.error)\r\n                    {\r\n                        setError(data.error)\r\n                    }\r\n                    else\r\n                    {\r\n                        setRelatedProduct(data.products);\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const productId = props.match.params.productId\r\n        loadSingleProduct(productId)\r\n    },[props])\r\n\r\n    return(\r\n        <Layout title={product && product.name}\r\n                description={product && \r\n                             product.description && \r\n                             product.description.substring(0,100)}\r\n                className='container-fluid' >\r\n            <div className='row'>\r\n                <div className='col-8'>\r\n                {\r\n                    product && \r\n                    product.description &&\r\n                    <Card product = {product} showViewProductButton={false}/> \r\n                }\r\n                </div>\r\n                <div className='col-4'>\r\n                    <h4>Related Products</h4>\r\n                    {\r\n                        relatedProduct.map((p,i)=>(\r\n                            <div key={i} className='mb-3'>\r\n                                <Card product={p}/>\r\n                            </div>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </div>        \r\n        </Layout>        \r\n    )\r\n}\r\n\r\nexport default Product;","import React, { useState,useEffect } from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {getBraintreeClientToken,processPayment,createOrder} from './apiCore'\r\nimport Dropin from 'braintree-web-drop-in-react'\r\nimport {emptyCart} from './cartHelper'\r\n\r\n\r\n// run and setRun imported to change the parent Component state\r\n// when emptyCart is run , items are deleted from localStorage but the state isn't\r\n//changed. So setRun is imported to run the useEffect again in Cart Component\r\n//(parent one)\r\nconst Checkout = ({products,\r\n                  run=undefined,\r\n                  setRun = f=>f}) =>{\r\n\r\n    const [data,setData] = useState({\r\n        success:false,\r\n        error:'',\r\n        clientToken:null,\r\n        instance:{},\r\n        address:''\r\n    })\r\n\r\n    let deliveryAddress = data.address\r\n\r\n    const userId = isAuthenticated() && isAuthenticated().user._id;\r\n    const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n    const getToken = (userId,token) =>{\r\n        if(userId)\r\n        {\r\n            getBraintreeClientToken(userId,token)\r\n            .then(data=>{\r\n                if(data.error)\r\n                {\r\n                    setData({...data,error:data.error})\r\n                }\r\n                else\r\n                {\r\n                    setData({...data,clientToken:data.clientToken,success:false})\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        getToken(userId,token);\r\n    },[])\r\n\r\n    const buy = () =>{\r\n        let nonce;\r\n        let getNonce = data.instance.requestPaymentMethod()\r\n        .then(data=>{\r\n            // console.log(data)\r\n            nonce = data.nonce\r\n            // console.log('send nonce and total to process: ',nonce,getTotal())\r\n            const paymentData = {\r\n                paymentMethodNonce:nonce,\r\n                amount:getTotal()\r\n            }\r\n\r\n            processPayment(userId,token,paymentData)\r\n            .then(response =>{\r\n                //create order\r\n                console.log(response);\r\n\r\n                const createOrderData = {\r\n                    products:products,\r\n                    transaction_id:response.transaction.id,\r\n                    amount:response.transaction.amount,\r\n                    address:deliveryAddress\r\n                }\r\n\r\n                createOrder(userId,token,createOrderData)\r\n\r\n                //empty cart\r\n                {emptyCart(()=>{\r\n                    console.log('cart cleared')\r\n                    setData({...data,success:true})\r\n                    setRun(!run)\r\n                })}\r\n            })\r\n            .catch(error => console.log(error))\r\n\r\n        })\r\n        .catch(error=>{\r\n            console.log('dropin error: ',error)\r\n            setData({...data,error:error.message})\r\n    \r\n        })\r\n    }\r\n\r\n    const showError = (error) =>(\r\n        <div className='alert alert-danger' \r\n             style={{display:error ?'':'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = (success) =>{\r\n\r\n        return <div className='alert alert-info' \r\n             style={{display:success ?'':'none'}}>\r\n            Payment successfull\r\n        </div>\r\n    }\r\n\r\n    const handleAddress = (event)=>{\r\n        setData({...data,address:event.target.value})\r\n    }\r\n\r\n    const showDropin = ()=>(\r\n        <div onBlur = {()=>{setData({...data,error:''})}}>\r\n            {products.length>0 && data.clientToken!==null ? (\r\n                <div>\r\n\r\n                <div className=\"form-group mb-3\">\r\n                    <label className=\"text-muted\">Delivery address:</label>\r\n                    <textarea\r\n                        onChange={handleAddress}\r\n                        className=\"form-control\"\r\n                        value={data.address}\r\n                        placeholder=\"Type your delivery address here...\"\r\n                    />\r\n                </div>\r\n\r\n                    <Dropin options={{\r\n                        authorization:data.clientToken\r\n                    }}\r\n                    onInstance={instance => data.instance = instance}/>\r\n                    <button onClick={buy} className='btn btn-success btn-block'>\r\n                        Pay\r\n                    </button>\r\n                </div>\r\n            ) : null}\r\n        </div>\r\n    )\r\n\r\n    const getTotal =  ()=>{\r\n        return products.reduce((currentValue,nextValue)=>{\r\n            return currentValue + nextValue.count*nextValue.price\r\n        },0)\r\n    }\r\n\r\n    const showCheckout = () =>{\r\n        return isAuthenticated() ? (\r\n            <div>{showDropin()}</div>\r\n        ) : (\r\n            <Link to='/signin'>\r\n                <div className='btn btn-primary'>\r\n                    Signin for checkout\r\n                </div>\r\n            </Link>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Total: ${getTotal()} </h2>\r\n            {showSuccess(data.success)}\r\n            {showError(data.error)}\r\n            {showCheckout()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout;","import React, { useState, useEffect } from 'react';\r\nimport Layout from './layout';\r\nimport { Link } from 'react-router-dom';\r\nimport { getCart } from './cartHelper';\r\nimport Card from './Card';\r\nimport Checkout from './Checkout';\r\n \r\nconst Cart = () => {\r\n  const [items, setItems] = useState([]);\r\n  // const [cartSize, setCartSize] = useState([]);\r\n  const [run, setRun] = useState(false);\r\n \r\n  useEffect(() => {\r\n    console.log('MAX DEPTH ...');\r\n    setItems(getCart());\r\n  }, [run]);\r\n \r\n  const showItems = items => {\r\n    return (\r\n      <div>\r\n        <h2>Your cart has {`${items.length}`} items</h2>\r\n        <hr />\r\n        {items.map((product, i) => (\r\n          <Card\r\n            key={i}\r\n            product={product}\r\n            showAddToCartButton={false}\r\n            cartUpdate={true}\r\n            showRemoveProductButton={true}\r\n            setRun={setRun}\r\n            run={run}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n \r\n  const noItemsMessage = () => (\r\n    <h2>\r\n      Your Cart is empty. <br />\r\n      <Link to=\"/shop\"> Continue shopping. </Link>\r\n    </h2>\r\n  );\r\n \r\n  return (\r\n    <Layout title=\"Shopping Cart\" description=\"Checkout now!\" className=\"container-fluid\">\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">{items.length > 0 ? showItems(items) : noItemsMessage()}</div>\r\n        <div className=\"col-6\">\r\n          <h2 className=\"mb-4\">Your Cart Summary</h2>\r\n          <hr />\r\n          <Checkout products={items} run={run} setRun={setRun}/>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n \r\nexport default Cart;\r\n","import React,{useState,useEffect} from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {listOrders,getStatusValues,updateOrderStatus} from './ApiAdmin'\r\nimport moment from 'moment'\r\n\r\nconst Orders = ()=>{\r\n\r\n    const [orders,setOrders] = useState([])\r\n    const [statusValues,setStatusValues] = useState([])\r\n\r\n    const {user,token} = isAuthenticated()\r\n\r\n    const loadOrders = ()=>{\r\n        listOrders(user._id,token)\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                console.log(data.error)\r\n            }\r\n            else\r\n            {\r\n                setOrders(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadStatusValues = ()=>{\r\n        getStatusValues(user._id,token)\r\n        .then(data=>{   \r\n           setStatusValues(data)\r\n           //console.log(data);\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadOrders()\r\n        loadStatusValues()\r\n    },[])\r\n\r\n    const showOrdersLength = ()=>{\r\n        if(orders.length > 0)\r\n        {\r\n            return(\r\n                <h1 className='text-danger display-2'>\r\n                    Total Orders: {orders.length}\r\n                </h1>\r\n            )\r\n        }\r\n        else\r\n        {\r\n            return (\r\n                <h1 className='text-danger'>No Orders</h1>        \r\n            )\r\n        }\r\n    }\r\n\r\n    const showInput = (key, value) => (\r\n        <div className=\"input-group mb-2 mr-sm-2\">\r\n            <div className=\"input-group-prepend\">\r\n                <div className=\"input-group-text\">{key}</div>\r\n            </div>\r\n            <input\r\n                type=\"text\"\r\n                value={value}\r\n                className=\"form-control\"\r\n                readOnly\r\n            />\r\n        </div>\r\n    );\r\n\r\n    const handleStatusChange = (e,orderId)=>{\r\n        updateOrderStatus(user._id,token,orderId,e.target.value)\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                console.log(\"Error updating status\")\r\n            }\r\n            else\r\n            {\r\n                loadOrders()\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    const showStatus = order => (\r\n        <div className=\"form-group\">\r\n            <h3 className=\"mark mb-4\">Status: {order.status}</h3>\r\n            <select\r\n                className=\"form-control\"\r\n                onChange={e => handleStatusChange(e, order._id)}\r\n            >\r\n                <option>Update Status</option>\r\n                {statusValues.map((status, index) => (\r\n                    <option key={index} value={status}>\r\n                        {status}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n        </div>\r\n    );\r\n\r\n    return( \r\n        <Layout title='Orders' \r\n                description={`G'day ${user.name}, Manage your Orders here`}>\r\n          <div className='row'>\r\n            <div className='col-md-8 offset-md-2'>\r\n                {showOrdersLength()}\r\n                {orders.map((order,i)=>(\r\n                    <div className='mt-5' key={i} \r\n                         style={{borderBottom:\"5px solid indigo\"}}>\r\n                    \r\n                    <h2 className='mb-5'>\r\n                        <span>\r\n                            Order ID: {order._id}\r\n                        </span>\r\n                    </h2>\r\n                    <ul className='list-group mb-2'>\r\n                        <li className='list-group-item'>\r\n                            {showStatus(order)}\r\n                        </li>\r\n                        <li className='list-group-item'>\r\n                            Transaction ID:{order.transaction_id}\r\n                        </li>\r\n                        <li className='list-group-item'>\r\n                            Amount: ${order.amount}\r\n                        </li>\r\n                        <li className='list-group-item'>\r\n                            Ordered By: {order.user.name}\r\n                        </li>\r\n                        <li className='list-group-item'>\r\n                            Ordered On: {moment(order.createdAt).fromNow()}\r\n                        </li>\r\n                        <li className='list-group-item'>\r\n                            Delivery Address: {order.address}\r\n                        </li>\r\n                    </ul>\r\n                    <h3 className='mt-4 mb-4 font-italic'>\r\n                        Total products in order: {order.products.length}\r\n                    </h3>\r\n                    {order.products.map((p, pIndex) => (\r\n                        <div\r\n                            className=\"mb-4\"\r\n                            key={pIndex}\r\n                            style={{\r\n                                padding: \"20px\",\r\n                                border: \"1px solid indigo\"\r\n                            }}\r\n                        >\r\n                            {showInput(\"Product name\", p.name)}\r\n                            {showInput(\"Product price\", p.price)}\r\n                            {showInput(\"Product total\", p.count)}\r\n                            {showInput(\"Product Id\", p._id)}\r\n                        </div>\r\n                    ))}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n          </div>\r\n\r\n        </Layout>\r\n    )  \r\n\r\n}\r\n\r\nexport default Orders\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {Link,Redirect} from 'react-router-dom'\r\nimport {read,update,updateUser} from './apiUser'\r\n\r\nconst Profile = (props) =>{\r\n    const [values,setValues] = useState({\r\n        name:'',\r\n        email:'',\r\n        password:'',\r\n        error:false,\r\n        success:false\r\n    })\r\n\r\n    const {name,email,password,error,success} = values;\r\n    const {token} = isAuthenticated()\r\n\r\n    const init = (userId)=>{\r\n        //console.log(userId)\r\n        read(userId,token)\r\n        .then(data=>{\r\n            if(data.error)\r\n            {\r\n                setValues({...values,error:true})\r\n            }\r\n            else\r\n            {\r\n                setValues({...values,name:data.name,email:data.email})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init(props.match.params.userId);\r\n    },[])\r\n\r\n    const handleChange = name => e => {\r\n        setValues({ ...values, error: false, [name]: e.target.value });\r\n    };\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        update(props.match.params.userId, token, { name, email, password })\r\n        .then(data => {\r\n            if (data.error) {\r\n                // console.log(data.error);\r\n                alert(data.error);\r\n            } else {\r\n                {console.log(data)}\r\n                updateUser(data, () => {\r\n                    setValues({\r\n                        ...values,\r\n                        name: data.name,\r\n                        email: data.email,\r\n                        success: true\r\n                    });\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const redirectUser = success => {\r\n        if (success) {\r\n            return <Redirect to=\"/cart\" />;\r\n        }\r\n    };\r\n\r\n    const profileUpdate = (name, email, password) => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input type=\"email\" onChange={handleChange('email')} className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\r\n            </div>\r\n\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n                Submit\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    return(\r\n        <Layout     title='Profile' \r\n                    description='Update your profile'\r\n                    className='container-fluid'>\r\n              {profileUpdate(name,email,password)}\r\n              {redirectUser(values.success)}\r\n        </Layout>    \r\n    )\r\n}\r\n\r\nexport default Profile","import React,{useState,useEffect} from 'react';\r\nimport Layout from '../core/layout'\r\nimport {isAuthenticated} from '../auth/index'\r\nimport {Link} from 'react-router-dom'\r\nimport {getProducts,deleteProduct} from './ApiAdmin'\r\n\r\nconst ManageProducts = ()=>{\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const { user, token } = isAuthenticated();\r\n\r\n    const loadProducts = () => {\r\n        getProducts().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setProducts(data.data);\r\n            }\r\n        });\r\n    };\r\n\r\n    const destroy = productId => {\r\n        deleteProduct(productId, user._id, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                loadProducts();\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadProducts();\r\n    }, []);\r\n\r\n    const showProductsLength = ()=>{\r\n        \r\n            return(\r\n                <h2>Total Products : {products.length}</h2>\r\n            )\r\n\r\n    }\r\n\r\n    return (\r\n        <Layout title='Manage Products' \r\n                description='Perform CRUD on Products' className='container'>\r\n                <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h2 className=\"text-center\">\r\n                        {showProductsLength()}\r\n                    </h2>\r\n                    <hr />\r\n                    <ul className=\"list-group\">\r\n                        {products.map((p, i) => (\r\n                            <li\r\n                            key={i}\r\n                            className=\"list-group-item \r\n                                       d-flex justify-content-between \r\n                                       align-items-center\">\r\n                                <strong>{p.name}</strong>\r\n                                <Link to={`/admin/product/update/${p._id}`}>\r\n                                    <span className=\"badge \r\n                                                     badge-warning badge-pill\">\r\n                                        Update\r\n                                    </span>\r\n                                </Link>\r\n                                <span\r\n                                    onClick={() => destroy(p._id)}\r\n                                className=\"badge badge-danger badge-pill\"\r\n                                style={{cursor:'pointer'}}\r\n                                    >\r\n                                    Delete\r\n                                </span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    <br />\r\n                </div>\r\n            </div>\r\n        </Layout>  \r\n    )\r\n}\r\n\r\nexport default ManageProducts\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from '../core/layout';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { getProduct, getCategories, updateProduct } from './ApiAdmin';\r\n\r\nconst UpdateProduct = ({ match }) => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: false,\r\n        error: false,\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    });\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    const { user, token } = isAuthenticated();\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        // categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    const init = productId => {\r\n        getProduct(productId).then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                // populate the state\r\n                setValues({\r\n                    ...values,\r\n                    name: data.name,\r\n                    description: data.description,\r\n                    price: data.price,\r\n                    category: data.category._id,\r\n                    shipping: data.shipping,\r\n                    quantity: data.quantity,\r\n                    formData: new FormData()\r\n                });\r\n                // load categories\r\n                initCategories();\r\n            }\r\n        });\r\n    };\r\n\r\n    // load categories and set form data\r\n    const initCategories = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setCategories(data.categories);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init(match.params.productId);\r\n    }, []);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\r\n        formData.set(name, value);\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault();\r\n        setValues({ ...values, error: '', loading: true });\r\n\r\n        updateProduct(match.params.productId, user._id, token, formData)\r\n        .then(data => {\r\n            if (data.error) {\r\n                setValues({ ...values, error: data.error });\r\n            } else {\r\n                setValues({\r\n                    ...values,\r\n                    name: '',\r\n                    description: '',\r\n                    photo: '',\r\n                    price: '',\r\n                    quantity: '',\r\n                    loading: false,\r\n                    error: false,\r\n                    redirectToProfile: true,\r\n                    createdProduct: data.name\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    {categories &&\r\n                        categories.map((c, i) => (\r\n                            <option key={i} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                    <option>Please select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"1\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">Update Product</button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{ display: createdProduct ? '' : 'none' }}>\r\n            <h2>{`${createdProduct}`} is updated!</h2>\r\n        </div>\r\n    );\r\n\r\n    const showLoading = () =>\r\n        loading && (\r\n            <div className=\"alert alert-success\">\r\n                <h2>Loading...</h2>\r\n            </div>\r\n        );\r\n\r\n    const redirectUser = () => {\r\n        if (redirectToProfile) {\r\n            if (!error) {\r\n                return <Redirect to=\"/\" />;\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Layout title=\"Update Product\" description={`G'day ${user.name}`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {showError()}\r\n                    {newPostForm()}\r\n                    {redirectUser()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default UpdateProduct;\r\n","import React from 'react';\r\nimport {BrowserRouter,Switch,Route} from 'react-router-dom';\r\nimport Signup from './user/Signup'\r\nimport Signin from './user/Signin'\r\nimport Home from './core/Home'\r\nimport PrivateRoute from './auth/PrivateRoute'\r\nimport Dashboard from './user/UserDashboard'\r\nimport AdminRoute from './auth/AdminRoute'\r\nimport AdminDashboard from './user/AdminDashboard'\r\nimport AddCategory from './admin/AddCategory'\r\nimport AddProduct from './admin/AddProduct'\r\nimport Shop from './core/Shop'\r\nimport Product from './core/Product'\r\nimport Cart from './core/Cart'\r\nimport Orders from './admin/Orders'\r\nimport Profile from './user/Profile'\r\nimport ManageProducts from './admin/ManageProducts'\r\nimport UpdateProduct from './admin/UpdateProduct'\r\n\r\nconst Routes = () =>{\r\n    // Browser Router makes the router props available\r\n    return(\r\n        <BrowserRouter>\r\n            <Switch> \r\n                <Route path='/signin' exact component={Signin} />\r\n                <Route path='/shop' exact component={Shop} />\r\n                <Route path='/signup' exact component={Signup} />\r\n                <Route path='/' exact component={Home}  />\r\n                <PrivateRoute path='/user/dashboard' \r\n                              exact \r\n                              component={Dashboard}  />\r\n                <AdminRoute   path='/admin/dashboard' \r\n                              exact \r\n                              component={AdminDashboard}  />\r\n                <AdminRoute path='/create/category' \r\n                            exact\r\n                            component={AddCategory}/>              \r\n                <AdminRoute path='/create/product' \r\n                            exact\r\n                            component={AddProduct}/>\r\n                <Route path='/product/:productId'\r\n                       exact\r\n                       component={Product} />  \r\n                <Route path='/cart' exact component={Cart} />\r\n                <AdminRoute   path='/admin/orders' \r\n                              exact \r\n                              component={Orders}  />     \r\n                <PrivateRoute path='/profile/:userId' \r\n                              exact \r\n                              component={Profile}  /> \r\n                <AdminRoute   path='/admin/products' \r\n                              exact \r\n                              component={ManageProducts}  /> \r\n                <AdminRoute path='/admin/product/update/:productId' \r\n                              exact\r\n                              component={UpdateProduct}/>                                 \r\n            </Switch>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Routes from './Routes';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Routes />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}